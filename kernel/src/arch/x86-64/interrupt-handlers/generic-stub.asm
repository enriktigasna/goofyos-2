global isr_vector_0_handler
global isr_generic_stub
global return_to_ctx

extern isr_generic_handler

align 16
isr_vector_0_handler:
push 0
push 0
jmp isr_generic_stub

align 16
isr_vector_1_handler:
push 0
push 1
jmp isr_generic_stub

align 16
isr_vector_2_handler:
push 0
push 2
jmp isr_generic_stub

align 16
isr_vector_3_handler:
push 0
push 3
jmp isr_generic_stub

align 16
isr_vector_4_handler:
push 0
push 4
jmp isr_generic_stub

align 16
isr_vector_5_handler:
push 0
push 5
jmp isr_generic_stub

align 16
isr_vector_6_handler:
push 0
push 6
jmp isr_generic_stub

align 16
isr_vector_7_handler:
push 0
push 7
jmp isr_generic_stub

align 16
isr_vector_8_handler:
;push 0
push 8
jmp isr_generic_stub

align 16
isr_vector_9_handler:
push 0
push 9
jmp isr_generic_stub

align 16
isr_vector_10_handler:
;push 0
push 10
jmp isr_generic_stub

align 16
isr_vector_11_handler:
;push 0
push 11
jmp isr_generic_stub

align 16
isr_vector_12_handler:
push 0
push 12
jmp isr_generic_stub

align 16
isr_vector_13_handler:

push 13
jmp isr_generic_stub

align 16
isr_vector_14_handler:

push 14
jmp isr_generic_stub

align 16
isr_vector_15_handler:
push 0
push 15
jmp isr_generic_stub

align 16
isr_vector_16_handler:
push 0
push 16
jmp isr_generic_stub

align 16
isr_vector_17_handler:
;push 0
push 17
jmp isr_generic_stub

align 16
isr_vector_18_handler:
push 0
push 18
jmp isr_generic_stub

align 16
isr_vector_19_handler:
push 0
push 19
jmp isr_generic_stub

align 16
isr_vector_20_handler:
push 0
push 20
jmp isr_generic_stub

align 16
isr_vector_21_handler:
push 0
push 21
jmp isr_generic_stub

align 16
isr_vector_22_handler:
push 0
push 22
jmp isr_generic_stub

align 16
isr_vector_23_handler:
push 0
push 23
jmp isr_generic_stub

align 16
isr_vector_24_handler:
push 0
push 24
jmp isr_generic_stub

align 16
isr_vector_25_handler:
push 0
push 25
jmp isr_generic_stub

align 16
isr_vector_26_handler:
push 0
push 26
jmp isr_generic_stub

align 16
isr_vector_27_handler:
push 0
push 27
jmp isr_generic_stub

align 16
isr_vector_28_handler:
push 0
push 28
jmp isr_generic_stub

align 16
isr_vector_29_handler:
push 0
push 29
jmp isr_generic_stub

align 16
isr_vector_30_handler:
push 0
push 30
jmp isr_generic_stub

align 16
isr_vector_31_handler:
push 0
push 31
jmp isr_generic_stub

align 16
isr_vector_32_handler:
push 0
push 32
jmp isr_generic_stub

align 16
isr_vector_33_handler:
push 0
push 33
jmp isr_generic_stub

align 16
isr_vector_34_handler:
push 0
push 34
jmp isr_generic_stub

align 16
isr_vector_35_handler:
push 0
push 35
jmp isr_generic_stub

align 16
isr_vector_36_handler:
push 0
push 36
jmp isr_generic_stub

align 16
isr_vector_37_handler:
push 0
push 37
jmp isr_generic_stub

align 16
isr_vector_38_handler:
push 0
push 38
jmp isr_generic_stub

align 16
isr_vector_39_handler:
push 0
push 39
jmp isr_generic_stub

align 16
isr_vector_40_handler:
push 0
push 40
jmp isr_generic_stub

align 16
isr_vector_41_handler:
push 0
push 41
jmp isr_generic_stub

align 16
isr_vector_42_handler:
push 0
push 42
jmp isr_generic_stub

align 16
isr_vector_43_handler:
push 0
push 43
jmp isr_generic_stub

align 16
isr_vector_44_handler:
push 0
push 44
jmp isr_generic_stub

align 16
isr_vector_45_handler:
push 0
push 45
jmp isr_generic_stub

align 16
isr_vector_46_handler:
push 0
push 46
jmp isr_generic_stub

align 16
isr_vector_47_handler:
push 0
push 47
jmp isr_generic_stub

align 16
isr_vector_48_handler:
push 0
push 48
jmp isr_generic_stub

align 16
isr_vector_49_handler:
push 0
push 49
jmp isr_generic_stub

align 16
isr_vector_50_handler:
push 0
push 50
jmp isr_generic_stub

align 16
isr_vector_51_handler:
push 0
push 51
jmp isr_generic_stub

align 16
isr_vector_52_handler:
push 0
push 52
jmp isr_generic_stub

align 16
isr_vector_53_handler:
push 0
push 53
jmp isr_generic_stub

align 16
isr_vector_54_handler:
push 0
push 54
jmp isr_generic_stub

align 16
isr_vector_55_handler:
push 0
push 55
jmp isr_generic_stub

align 16
isr_vector_56_handler:
push 0
push 56
jmp isr_generic_stub

align 16
isr_vector_57_handler:
push 0
push 57
jmp isr_generic_stub

align 16
isr_vector_58_handler:
push 0
push 58
jmp isr_generic_stub

align 16
isr_vector_59_handler:
push 0
push 59
jmp isr_generic_stub

align 16
isr_vector_60_handler:
push 0
push 60
jmp isr_generic_stub

align 16
isr_vector_61_handler:
push 0
push 61
jmp isr_generic_stub

align 16
isr_vector_62_handler:
push 0
push 62
jmp isr_generic_stub

align 16
isr_vector_63_handler:
push 0
push 63
jmp isr_generic_stub

align 16
isr_vector_64_handler:
push 0
push 64
jmp isr_generic_stub

align 16
isr_vector_65_handler:
push 0
push 65
jmp isr_generic_stub

align 16
isr_vector_66_handler:
push 0
push 66
jmp isr_generic_stub

align 16
isr_vector_67_handler:
push 0
push 67
jmp isr_generic_stub

align 16
isr_vector_68_handler:
push 0
push 68
jmp isr_generic_stub

align 16
isr_vector_69_handler:
push 0
push 69
jmp isr_generic_stub

align 16
isr_vector_70_handler:
push 0
push 70
jmp isr_generic_stub

align 16
isr_vector_71_handler:
push 0
push 71
jmp isr_generic_stub

align 16
isr_vector_72_handler:
push 0
push 72
jmp isr_generic_stub

align 16
isr_vector_73_handler:
push 0
push 73
jmp isr_generic_stub

align 16
isr_vector_74_handler:
push 0
push 74
jmp isr_generic_stub

align 16
isr_vector_75_handler:
push 0
push 75
jmp isr_generic_stub

align 16
isr_vector_76_handler:
push 0
push 76
jmp isr_generic_stub

align 16
isr_vector_77_handler:
push 0
push 77
jmp isr_generic_stub

align 16
isr_vector_78_handler:
push 0
push 78
jmp isr_generic_stub

align 16
isr_vector_79_handler:
push 0
push 79
jmp isr_generic_stub

align 16
isr_vector_80_handler:
push 0
push 80
jmp isr_generic_stub

align 16
isr_vector_81_handler:
push 0
push 81
jmp isr_generic_stub

align 16
isr_vector_82_handler:
push 0
push 82
jmp isr_generic_stub

align 16
isr_vector_83_handler:
push 0
push 83
jmp isr_generic_stub

align 16
isr_vector_84_handler:
push 0
push 84
jmp isr_generic_stub

align 16
isr_vector_85_handler:
push 0
push 85
jmp isr_generic_stub

align 16
isr_vector_86_handler:
push 0
push 86
jmp isr_generic_stub

align 16
isr_vector_87_handler:
push 0
push 87
jmp isr_generic_stub

align 16
isr_vector_88_handler:
push 0
push 88
jmp isr_generic_stub

align 16
isr_vector_89_handler:
push 0
push 89
jmp isr_generic_stub

align 16
isr_vector_90_handler:
push 0
push 90
jmp isr_generic_stub

align 16
isr_vector_91_handler:
push 0
push 91
jmp isr_generic_stub

align 16
isr_vector_92_handler:
push 0
push 92
jmp isr_generic_stub

align 16
isr_vector_93_handler:
push 0
push 93
jmp isr_generic_stub

align 16
isr_vector_94_handler:
push 0
push 94
jmp isr_generic_stub

align 16
isr_vector_95_handler:
push 0
push 95
jmp isr_generic_stub

align 16
isr_vector_96_handler:
push 0
push 96
jmp isr_generic_stub

align 16
isr_vector_97_handler:
push 0
push 97
jmp isr_generic_stub

align 16
isr_vector_98_handler:
push 0
push 98
jmp isr_generic_stub

align 16
isr_vector_99_handler:
push 0
push 99
jmp isr_generic_stub

align 16
isr_vector_100_handler:
push 0
push 100
jmp isr_generic_stub

align 16
isr_vector_101_handler:
push 0
push 101
jmp isr_generic_stub

align 16
isr_vector_102_handler:
push 0
push 102
jmp isr_generic_stub

align 16
isr_vector_103_handler:
push 0
push 103
jmp isr_generic_stub

align 16
isr_vector_104_handler:
push 0
push 104
jmp isr_generic_stub

align 16
isr_vector_105_handler:
push 0
push 105
jmp isr_generic_stub

align 16
isr_vector_106_handler:
push 0
push 106
jmp isr_generic_stub

align 16
isr_vector_107_handler:
push 0
push 107
jmp isr_generic_stub

align 16
isr_vector_108_handler:
push 0
push 108
jmp isr_generic_stub

align 16
isr_vector_109_handler:
push 0
push 109
jmp isr_generic_stub

align 16
isr_vector_110_handler:
push 0
push 110
jmp isr_generic_stub

align 16
isr_vector_111_handler:
push 0
push 111
jmp isr_generic_stub

align 16
isr_vector_112_handler:
push 0
push 112
jmp isr_generic_stub

align 16
isr_vector_113_handler:
push 0
push 113
jmp isr_generic_stub

align 16
isr_vector_114_handler:
push 0
push 114
jmp isr_generic_stub

align 16
isr_vector_115_handler:
push 0
push 115
jmp isr_generic_stub

align 16
isr_vector_116_handler:
push 0
push 116
jmp isr_generic_stub

align 16
isr_vector_117_handler:
push 0
push 117
jmp isr_generic_stub

align 16
isr_vector_118_handler:
push 0
push 118
jmp isr_generic_stub

align 16
isr_vector_119_handler:
push 0
push 119
jmp isr_generic_stub

align 16
isr_vector_120_handler:
push 0
push 120
jmp isr_generic_stub

align 16
isr_vector_121_handler:
push 0
push 121
jmp isr_generic_stub

align 16
isr_vector_122_handler:
push 0
push 122
jmp isr_generic_stub

align 16
isr_vector_123_handler:
push 0
push 123
jmp isr_generic_stub

align 16
isr_vector_124_handler:
push 0
push 124
jmp isr_generic_stub

align 16
isr_vector_125_handler:
push 0
push 125
jmp isr_generic_stub

align 16
isr_vector_126_handler:
push 0
push 126
jmp isr_generic_stub

align 16
isr_vector_127_handler:
push 0
push 127
jmp isr_generic_stub

align 16
isr_vector_128_handler:
push 0
push 128
jmp isr_generic_stub

align 16
isr_vector_129_handler:
push 0
push 129
jmp isr_generic_stub

align 16
isr_vector_130_handler:
push 0
push 130
jmp isr_generic_stub

align 16
isr_vector_131_handler:
push 0
push 131
jmp isr_generic_stub

align 16
isr_vector_132_handler:
push 0
push 132
jmp isr_generic_stub

align 16
isr_vector_133_handler:
push 0
push 133
jmp isr_generic_stub

align 16
isr_vector_134_handler:
push 0
push 134
jmp isr_generic_stub

align 16
isr_vector_135_handler:
push 0
push 135
jmp isr_generic_stub

align 16
isr_vector_136_handler:
push 0
push 136
jmp isr_generic_stub

align 16
isr_vector_137_handler:
push 0
push 137
jmp isr_generic_stub

align 16
isr_vector_138_handler:
push 0
push 138
jmp isr_generic_stub

align 16
isr_vector_139_handler:
push 0
push 139
jmp isr_generic_stub

align 16
isr_vector_140_handler:
push 0
push 140
jmp isr_generic_stub

align 16
isr_vector_141_handler:
push 0
push 141
jmp isr_generic_stub

align 16
isr_vector_142_handler:
push 0
push 142
jmp isr_generic_stub

align 16
isr_vector_143_handler:
push 0
push 143
jmp isr_generic_stub

align 16
isr_vector_144_handler:
push 0
push 144
jmp isr_generic_stub

align 16
isr_vector_145_handler:
push 0
push 145
jmp isr_generic_stub

align 16
isr_vector_146_handler:
push 0
push 146
jmp isr_generic_stub

align 16
isr_vector_147_handler:
push 0
push 147
jmp isr_generic_stub

align 16
isr_vector_148_handler:
push 0
push 148
jmp isr_generic_stub

align 16
isr_vector_149_handler:
push 0
push 149
jmp isr_generic_stub

align 16
isr_vector_150_handler:
push 0
push 150
jmp isr_generic_stub

align 16
isr_vector_151_handler:
push 0
push 151
jmp isr_generic_stub

align 16
isr_vector_152_handler:
push 0
push 152
jmp isr_generic_stub

align 16
isr_vector_153_handler:
push 0
push 153
jmp isr_generic_stub

align 16
isr_vector_154_handler:
push 0
push 154
jmp isr_generic_stub

align 16
isr_vector_155_handler:
push 0
push 155
jmp isr_generic_stub

align 16
isr_vector_156_handler:
push 0
push 156
jmp isr_generic_stub

align 16
isr_vector_157_handler:
push 0
push 157
jmp isr_generic_stub

align 16
isr_vector_158_handler:
push 0
push 158
jmp isr_generic_stub

align 16
isr_vector_159_handler:
push 0
push 159
jmp isr_generic_stub

align 16
isr_vector_160_handler:
push 0
push 160
jmp isr_generic_stub

align 16
isr_vector_161_handler:
push 0
push 161
jmp isr_generic_stub

align 16
isr_vector_162_handler:
push 0
push 162
jmp isr_generic_stub

align 16
isr_vector_163_handler:
push 0
push 163
jmp isr_generic_stub

align 16
isr_vector_164_handler:
push 0
push 164
jmp isr_generic_stub

align 16
isr_vector_165_handler:
push 0
push 165
jmp isr_generic_stub

align 16
isr_vector_166_handler:
push 0
push 166
jmp isr_generic_stub

align 16
isr_vector_167_handler:
push 0
push 167
jmp isr_generic_stub

align 16
isr_vector_168_handler:
push 0
push 168
jmp isr_generic_stub

align 16
isr_vector_169_handler:
push 0
push 169
jmp isr_generic_stub

align 16
isr_vector_170_handler:
push 0
push 170
jmp isr_generic_stub

align 16
isr_vector_171_handler:
push 0
push 171
jmp isr_generic_stub

align 16
isr_vector_172_handler:
push 0
push 172
jmp isr_generic_stub

align 16
isr_vector_173_handler:
push 0
push 173
jmp isr_generic_stub

align 16
isr_vector_174_handler:
push 0
push 174
jmp isr_generic_stub

align 16
isr_vector_175_handler:
push 0
push 175
jmp isr_generic_stub

align 16
isr_vector_176_handler:
push 0
push 176
jmp isr_generic_stub

align 16
isr_vector_177_handler:
push 0
push 177
jmp isr_generic_stub

align 16
isr_vector_178_handler:
push 0
push 178
jmp isr_generic_stub

align 16
isr_vector_179_handler:
push 0
push 179
jmp isr_generic_stub

align 16
isr_vector_180_handler:
push 0
push 180
jmp isr_generic_stub

align 16
isr_vector_181_handler:
push 0
push 181
jmp isr_generic_stub

align 16
isr_vector_182_handler:
push 0
push 182
jmp isr_generic_stub

align 16
isr_vector_183_handler:
push 0
push 183
jmp isr_generic_stub

align 16
isr_vector_184_handler:
push 0
push 184
jmp isr_generic_stub

align 16
isr_vector_185_handler:
push 0
push 185
jmp isr_generic_stub

align 16
isr_vector_186_handler:
push 0
push 186
jmp isr_generic_stub

align 16
isr_vector_187_handler:
push 0
push 187
jmp isr_generic_stub

align 16
isr_vector_188_handler:
push 0
push 188
jmp isr_generic_stub

align 16
isr_vector_189_handler:
push 0
push 189
jmp isr_generic_stub

align 16
isr_vector_190_handler:
push 0
push 190
jmp isr_generic_stub

align 16
isr_vector_191_handler:
push 0
push 191
jmp isr_generic_stub

align 16
isr_vector_192_handler:
push 0
push 192
jmp isr_generic_stub

align 16
isr_vector_193_handler:
push 0
push 193
jmp isr_generic_stub

align 16
isr_vector_194_handler:
push 0
push 194
jmp isr_generic_stub

align 16
isr_vector_195_handler:
push 0
push 195
jmp isr_generic_stub

align 16
isr_vector_196_handler:
push 0
push 196
jmp isr_generic_stub

align 16
isr_vector_197_handler:
push 0
push 197
jmp isr_generic_stub

align 16
isr_vector_198_handler:
push 0
push 198
jmp isr_generic_stub

align 16
isr_vector_199_handler:
push 0
push 199
jmp isr_generic_stub

align 16
isr_vector_200_handler:
push 0
push 200
jmp isr_generic_stub

align 16
isr_vector_201_handler:
push 0
push 201
jmp isr_generic_stub

align 16
isr_vector_202_handler:
push 0
push 202
jmp isr_generic_stub

align 16
isr_vector_203_handler:
push 0
push 203
jmp isr_generic_stub

align 16
isr_vector_204_handler:
push 0
push 204
jmp isr_generic_stub

align 16
isr_vector_205_handler:
push 0
push 205
jmp isr_generic_stub

align 16
isr_vector_206_handler:
push 0
push 206
jmp isr_generic_stub

align 16
isr_vector_207_handler:
push 0
push 207
jmp isr_generic_stub

align 16
isr_vector_208_handler:
push 0
push 208
jmp isr_generic_stub

align 16
isr_vector_209_handler:
push 0
push 209
jmp isr_generic_stub

align 16
isr_vector_210_handler:
push 0
push 210
jmp isr_generic_stub

align 16
isr_vector_211_handler:
push 0
push 211
jmp isr_generic_stub

align 16
isr_vector_212_handler:
push 0
push 212
jmp isr_generic_stub

align 16
isr_vector_213_handler:
push 0
push 213
jmp isr_generic_stub

align 16
isr_vector_214_handler:
push 0
push 214
jmp isr_generic_stub

align 16
isr_vector_215_handler:
push 0
push 215
jmp isr_generic_stub

align 16
isr_vector_216_handler:
push 0
push 216
jmp isr_generic_stub

align 16
isr_vector_217_handler:
push 0
push 217
jmp isr_generic_stub

align 16
isr_vector_218_handler:
push 0
push 218
jmp isr_generic_stub

align 16
isr_vector_219_handler:
push 0
push 219
jmp isr_generic_stub

align 16
isr_vector_220_handler:
push 0
push 220
jmp isr_generic_stub

align 16
isr_vector_221_handler:
push 0
push 221
jmp isr_generic_stub

align 16
isr_vector_222_handler:
push 0
push 222
jmp isr_generic_stub

align 16
isr_vector_223_handler:
push 0
push 223
jmp isr_generic_stub

align 16
isr_vector_224_handler:
push 0
push 224
jmp isr_generic_stub

align 16
isr_vector_225_handler:
push 0
push 225
jmp isr_generic_stub

align 16
isr_vector_226_handler:
push 0
push 226
jmp isr_generic_stub

align 16
isr_vector_227_handler:
push 0
push 227
jmp isr_generic_stub

align 16
isr_vector_228_handler:
push 0
push 228
jmp isr_generic_stub

align 16
isr_vector_229_handler:
push 0
push 229
jmp isr_generic_stub

align 16
isr_vector_230_handler:
push 0
push 230
jmp isr_generic_stub

align 16
isr_vector_231_handler:
push 0
push 231
jmp isr_generic_stub

align 16
isr_vector_232_handler:
push 0
push 232
jmp isr_generic_stub

align 16
isr_vector_233_handler:
push 0
push 233
jmp isr_generic_stub

align 16
isr_vector_234_handler:
push 0
push 234
jmp isr_generic_stub

align 16
isr_vector_235_handler:
push 0
push 235
jmp isr_generic_stub

align 16
isr_vector_236_handler:
push 0
push 236
jmp isr_generic_stub

align 16
isr_vector_237_handler:
push 0
push 237
jmp isr_generic_stub

align 16
isr_vector_238_handler:
push 0
push 238
jmp isr_generic_stub

align 16
isr_vector_239_handler:
push 0
push 239
jmp isr_generic_stub

align 16
isr_vector_240_handler:
push 0
push 240
jmp isr_generic_stub

align 16
isr_vector_241_handler:
push 0
push 241
jmp isr_generic_stub

align 16
isr_vector_242_handler:
push 0
push 242
jmp isr_generic_stub

align 16
isr_vector_243_handler:
push 0
push 243
jmp isr_generic_stub

align 16
isr_vector_244_handler:
push 0
push 244
jmp isr_generic_stub

align 16
isr_vector_245_handler:
push 0
push 245
jmp isr_generic_stub

align 16
isr_vector_246_handler:
push 0
push 246
jmp isr_generic_stub

align 16
isr_vector_247_handler:
push 0
push 247
jmp isr_generic_stub

align 16
isr_vector_248_handler:
push 0
push 248
jmp isr_generic_stub

align 16
isr_vector_249_handler:
push 0
push 249
jmp isr_generic_stub

align 16
isr_vector_250_handler:
push 0
push 250
jmp isr_generic_stub

align 16
isr_vector_251_handler:
push 0
push 251
jmp isr_generic_stub

align 16
isr_vector_252_handler:
push 0
push 252
jmp isr_generic_stub

align 16
isr_vector_253_handler:
push 0
push 253
jmp isr_generic_stub

align 16
isr_vector_254_handler:
push 0
push 254
jmp isr_generic_stub

align 16
isr_vector_255_handler:
push 0
push 255
jmp isr_generic_stub


isr_generic_stub:
    push r15
    push r14
    push r13
    push r12
    push r11
    push r10
    push r9
    push r8
    push rsi
    push rdi
    push rdx
    push rcx
    push rbx
    push rax
    push rbp
    mov rdi, rsp
    call isr_generic_handler

retpoline:
    pop rbp
    pop rax
    pop rbx
    pop rcx
    pop rdx
    pop rdi
    pop rsi
    pop r8
    pop r9
    pop r10
    pop r11
    pop r12
    pop r13
    pop r14
    pop r15

    add rsp, 16
    iretq

return_to_ctx:
    mov rsp, rdi
    mov cr3, rsi
    jmp retpoline